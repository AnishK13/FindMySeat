const mongoose = require('mongoose');
const Seat = require('../models/Seat');
require('dotenv').config({ path: __dirname + '/../.env' });

// Reading hall layout - 0 = empty, 1 = seat
const layout = [
    [1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0],
    [1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],
    [1,0,0,1,1,1,1,1,0,0,0,1,0,0,0,0,0,0],
    [1,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0],
    [1,0,0,1,0,0,0,1,0,0,0,1,1,1,1,1,1,1],
    [1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,1],
    [1,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1],
    [1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1],
    [1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,1],
    [1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,1],
    [0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1],
    [1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,1],
    [1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,1],
    [1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,1],
    [0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1],
    [1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,0,1],
    [1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,1],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1],
    [1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0]
  ];

async function initSeats() {
  await mongoose.connect(process.env.MONGO_URI);
  await Seat.deleteMany({});
  let count = 1;
  for (let row = 0; row < layout.length; row++) {
    for (let col = 0; col < layout[row].length; col++) {
      if (layout[row][col] === 1) {
        await Seat.create({
          seatId: `S${count}`,
          position: { row, col },
          status: 'available'
        });
        count++;
      }
    }
  }
  console.log('Seats initialized!');
  process.exit();
}

initSeats(); 